/*
 * =================================================================================================================
 * subprojects
 * Base configuration for all projects.
 */
allprojects {
	apply plugin: 'eclipse'
}

/*
 * =================================================================================================================
 * subprojects
 * Base configuration for all projects.
 */
subprojects {

	apply plugin: "java"
	apply plugin: 'maven'
	apply from:   '../emma.gradle'

	version = '1.0-SNAPSHOT'
	group = 'com.nudroid.persistence'
	sourceCompatibility = JavaVersion.VERSION_1_6
	targetCompatibility = JavaVersion.VERSION_1_6
	
	configurations { compileOnly }

	repositories {
    	mavenCentral()
    	maven {
        	url 'http://repo.springsource.org/libs-release'
        	url 'http://repo.springsource.org/libs-milestone'
    	}
	}

	dependencies {
    	testCompile 'org.testng:testng:6.8.5'
    	testCompile 'org.mockito:mockito-all:1.9.5'
	}

	test { useTestNG() }
	
	sourceSets.main.compileClasspath += configurations.compileOnly
    
    eclipse.classpath.plusConfigurations += [ configurations.compileOnly ]
}

/*
 * =================================================================================================================
 * nudroid-annotations-processor
 * Configuration for nudroid-annotations-processor.
 */
project(':nudroid-annotations-processor') {

    dependencies {
    	compile project(':nudroid-annotations')
        compileOnly 'com.google.guava:guava:15.0'
        compileOnly 'org.apache.velocity:velocity:1.7'
    }
}
/*
 * =================================================================================================================
 * nudroid-annotations-processor-all
 * Configuration for nudroid-annotations-processor-all.
 */
project(':nudroid-annotations-processor:nudroid-annotations-processor-all') {

    dependencies {
        compileOnly project(':nudroid-annotations-processor')
        compileOnly 'org.apache.velocity:velocity:1.7'
        compileOnly 'com.google.guava:guava:15.0'
    }
    
    jar {
        from { configurations.compileOnly.collect { it.isDirectory() ? it : zipTree(it) } }
    }
}