package com.nudroid.annotation.testbed;

import android.content.Context;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.content.UriMatcher;

import com.nudroid.provider.interceptor.ContentProviderContext;

/**
 * @author Auto-generated by Nudroid's provider annotation processor.
 */
public class SampleContentProviderDelegateRouter {

    static final UriMatcher URI_MATCHER;

    static {
        URI_MATCHER = new UriMatcher(UriMatcher.NO_MATCH);

        URI_MATCHER.addURI("com.nudroid.samples", "page/*/*", 4);
        URI_MATCHER.addURI("com.nudroid.samples", "factions", 1);
        URI_MATCHER.addURI("com.nudroid.samples", "*/*", 3);
        URI_MATCHER.addURI("com.nudroid.samples", "*", 2);
    }

    private com.nudroid.annotation.testbed.SampleContentProviderDelegate mDelegate;

    public SampleContentProviderDelegateRouter(com.nudroid.annotation.testbed.SampleContentProviderDelegate delegate) {

        this.mDelegate = delegate;
    }

    /**
     * @see android.content.ContentProvider#query(android.net.Uri, java.lang.String[],
     *      java.lang.String, java.lang.String[], java.lang.String)
     */
    public Cursor query(Context context, Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {

        ContentProviderContext contentProviderContext = null;
        Cursor result = null;

        switch (URI_MATCHER.match(uri)) {
        case 4:
        {

                java.util.List<String> pathSegments = uri.getPathSegments();

                contentProviderContext = new ContentProviderContext(context, uri, projection,
                        selection, selectionArgs, sortOrder, null);

                contentProviderContext.placeholders.put("type", pathSegments.get(1));
                contentProviderContext.placeholders.put("id", pathSegments.get(2));

                result = mDelegate.listPage(contentProviderContext.placeholders.get("type"), contentProviderContext.placeholders.get("id"));

                return result;


                    
        }

        case 1:
        {
            if (uri.getQueryParameterNames().contains("name")) {

                contentProviderContext = new ContentProviderContext(context, uri, projection,
                        selection, selectionArgs, sortOrder, null);

                contentProviderContext.placeholders.put("name", uri.getQueryParameter("name"));

                result = mDelegate.findFactionByName(contentProviderContext.placeholders.get("name"));

                return result;
            }


            throw new IllegalArgumentException(String.format("@Query URI %s is not mapped by content provider delegate %s",
                    uri, mDelegate.getClass()));
                    
        }

        case 3:
        {

                java.util.List<String> pathSegments = uri.getPathSegments();

                contentProviderContext = new ContentProviderContext(context, uri, projection,
                        selection, selectionArgs, sortOrder, null);

                contentProviderContext.placeholders.put("type", pathSegments.get(0));
                contentProviderContext.placeholders.put("id", pathSegments.get(1));

                result = mDelegate.listTypeById(contentProviderContext.placeholders.get("type"), contentProviderContext.placeholders.get("id"));

                return result;


                    
        }

        case 2:
        {

                java.util.List<String> pathSegments = uri.getPathSegments();

                contentProviderContext = new ContentProviderContext(context, uri, projection,
                        selection, selectionArgs, sortOrder, null);

                contentProviderContext.placeholders.put("type", pathSegments.get(0));

                result = mDelegate.listType(contentProviderContext.placeholders.get("type"));

                return result;


                    
        }

        default:

            throw new IllegalArgumentException(String.format("@Query URI %s is not mapped by content provider delegate %s",
                    uri, mDelegate.getClass()));
        }
    }

    /**
     * @see     android.content.ContentProvider#update(android.net.Uri, android.content.ContentValues,
     *      java.lang.String, java.lang.String[])
     */
    public int update(Context context, Uri uri, ContentValues contentValues, String selection, String[] selectionArgs) {

        ContentProviderContext contentProviderContext = null;
        int result = 0;

        switch (URI_MATCHER.match(uri)) {
        default:

            throw new IllegalArgumentException(String.format("Update URI %s is not mapped by content provider delegate %s",
                    uri, mDelegate.getClass()));
        }
    }

    /**
     * @see     android.content.ContentProvider#insert(android.net.Uri, android.content.ContentValues)
     */
    public Uri insert(Context context, Uri uri, ContentValues values) {

        return null;
    }


    /**
     * @see     android.content.ContentProvider#delete(android.net.Uri, java.lang.String,
     *      java.lang.String[])
     */
    public int delete(Context context, Uri uri, String selection, String[] selectionArgs) {

        return 0;
    }

    /**
     * @see     android.content.ContentProvider#getType(android.net.Uri)
     */
    public String getType(Context context, Uri uri) {

        return null;
    }

    @SuppressWarnings({ "unused", "unchecked" })
    private <T> T convert(String queryParameter, Class<T> clazz) {

        if (clazz.equals(Integer.class)) {
            return (T) Integer.valueOf(Integer.parseInt(queryParameter));
        }

        if (clazz.equals(Long.class)) {
            return (T) Long.valueOf(Long.parseLong(queryParameter));
        }

        if (clazz.equals(Float.class)) {
            return (T) Float.valueOf(Float.parseFloat(queryParameter));
        }

        if (clazz.equals(Double.class)) {
            return (T) Double.valueOf(Double.parseDouble(queryParameter));
        }

        throw new IllegalArgumentException(String.format("Unable to convert string '%s' to type %s.", queryParameter, clazz.getName()));
    }
}